# Packets

Packets are send between the nodes and the host, later also between the web dashboard and the host.
They are send over a websocket connection.

Packets are encoded like this:

```json
{
    "type": <type>
}
```

There are different types of packets:

### Auth

The `auth` packet is the first package that is being send by the node/web.
The secret key is a token generated by the host, that is needed for any device that wants to connect.

client-type can be `node` or `web`
Its optional, but only the `node` clients will get tasks assigned to them, and only `web` clients will get updates when account authed.

content:

```json
{
    "auth": <secret key>,
    "response": {
        "message": <client-type>
    }
}
```

### Config

The `config` packet is normally send from the host to the client. It returns the full config of the host.

content:

```json
{
    "config": {
        "host": <ip of host>,
        "port": <port of host>,
        "todo": "todo"
    }
}
```

### Add account

the `add_account` packet is send to add a account to the host.

account types: - ms - gc - mojang

content:

```json
{
    "account": {
        "type": <account type>,
        "password": <account password>,
        "email": <account email>
    }
}
```

### Mass add account

The `add_multiple_accounts` packet can be used to add multiple accounts at once.

content:

```json
{
    "account": {
        "lines": [
            "user:pass",
            "user2:pass2",
        ],
        "type": <account type>
    }
}
```

### Remove account

the `remove_account` packet is send to remove an account.

content:

```json
{
  "remove": {
    "email": "email@email.com"
  }
}
```

### Add task

The `task` packet is send from a node to a host.
For example, this could be a command to snipe a name with specified bearers.

content:

```json
{
    "add_task": {
        "type": <task type>
    }
}
```

### Response

The `***_response` packet is send from the host to a node. It starts with the type of the request.

content:

```json
{
  "reponse": {
    "error": null,
    "message": "error message"
  }
}
```

### Get state

The `get_state` packet gets the full state of the host. This includes the queue, accounts, config, etc.

### Get specific value from state

the `get_{type}` packet gets that specific value from the state.
Values: `tasks`, `logs`, `accounts`, `config`

### Authenticated account

The `account_authenticated` packet is send from the host to all clients. It signals that an account got authenticated.

```json
{}
```
